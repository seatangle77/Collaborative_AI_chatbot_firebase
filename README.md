# Collaborative_AI_chatbot

# ç”¨æˆ·æ“ä½œæŒ‡å—ï¼ˆREADMEï¼‰

## é¡¹ç›®ç®€ä»‹

æœ¬ç³»ç»Ÿä¸ºå°ç»„åä½œä¸AIæ™ºèƒ½åˆ†æå¹³å°ï¼Œæ”¯æŒè¡Œä¸ºæ•°æ®é‡‡é›†ã€è¯­éŸ³è¯†åˆ«ã€å¼‚å¸¸åˆ†æã€å®æ—¶æ¨é€å’Œåä½œç¬”è®°ç­‰åŠŸèƒ½ã€‚  
**ç®¡ç†å‘˜å·²ä¸ºä½ é…ç½®å¥½æ‰€æœ‰åå°æœåŠ¡å’Œæ’ä»¶ï¼Œä½ åªéœ€å…³æ³¨å‰ç«¯ç½‘é¡µçš„ä½¿ç”¨ã€‚**

---

## 1. æ’ä»¶å®‰è£…ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰

ç®¡ç†å‘˜ä¼šæä¾›ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼ˆTabBehavior Extensionï¼‰å‹ç¼©åŒ…æˆ–æ–‡ä»¶å¤¹ã€‚

**å®‰è£…æ­¥éª¤ï¼š**
1. æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè®¿é—® `chrome://extensions/`
2. å¼€å¯å³ä¸Šè§’"å¼€å‘è€…æ¨¡å¼"
3. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"ï¼Œé€‰æ‹©ç®¡ç†å‘˜å‘ç»™ä½ çš„æ’ä»¶æ–‡ä»¶å¤¹
4. å®‰è£…å®Œæˆåï¼Œå³ä¸Šè§’ä¼šå‡ºç°æ’ä»¶å›¾æ ‡

> æ’ä»¶è‡ªåŠ¨é‡‡é›†ä½ çš„ç½‘é¡µè¡Œä¸ºæ•°æ®ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚è¯·å‹¿éšæ„å…³é—­æˆ–å¸è½½ã€‚

---

## 2. è¯­éŸ³è¯†åˆ«è¯´æ˜

### 2.1 è¯­éŸ³è¯†åˆ«å‰çš„å‡†å¤‡

- **é¦–æ¬¡ä½¿ç”¨å‰**ï¼Œæ¯ä½ç”¨æˆ·éœ€ç”¨æ‰‹æœºæˆ–ç”µè„‘å½•åˆ¶ä¸€æ®µ**20ç§’å·¦å³çš„æ¸…æ™°è¯­éŸ³**ï¼ˆå†…å®¹ä¸é™ï¼Œæ™®é€šè¯´è¯å³å¯ï¼‰ã€‚
- å°†å½•éŸ³æ–‡ä»¶ï¼ˆå»ºè®®æ ¼å¼ï¼šwav/mp3ï¼Œæ–‡ä»¶åä¸º"å§“å+ç”¨æˆ·ID"ï¼‰å‘é€ç»™ç®¡ç†å‘˜ã€‚
- ç®¡ç†å‘˜ä¼šå°†ä½ çš„éŸ³é¢‘æ ·æœ¬é…ç½®åˆ°ç³»ç»Ÿä¸­ï¼Œä»¥æå‡è¯­éŸ³è¯†åˆ«çš„å‡†ç¡®ç‡ã€‚
- åªæœ‰å®Œæˆæ­¤æ­¥éª¤åï¼Œç³»ç»Ÿæ‰èƒ½å‡†ç¡®è¯†åˆ«ä½ çš„å‘è¨€å†…å®¹ã€‚

- è¯­éŸ³è¯†åˆ«ç”±ç®¡ç†å‘˜ç»Ÿä¸€åœ¨ä¼šè®®ç°åœºæˆ–åå°è¿è¡Œï¼Œæ— éœ€ç”¨æˆ·æ‰‹åŠ¨æ“ä½œã€‚
- ä½ åªéœ€æ­£å¸¸å‘è¨€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åˆ†æä½ çš„è¯­éŸ³å†…å®¹ã€‚

---

## 3. å‰ç«¯ç½‘é¡µåŠŸèƒ½ä¸æ“ä½œæŒ‡å¼•

### 3.1 ç™»å½•ä¸è¿›å…¥

- æ‰“å¼€ç®¡ç†å‘˜æä¾›çš„ç½‘å€ï¼ˆå¦‚ http://xxx.xxx:5173ï¼‰
- ä½¿ç”¨åˆ†é…çš„è´¦å·ç™»å½•ï¼Œè¿›å…¥ä¸ªäººå·¥ä½œåŒº

---

### 3.2 é¡µé¢ä¸»è¦åŠŸèƒ½åŒº

#### 1ï¼‰é¡¶éƒ¨å¯¼èˆªæ 
- æ˜¾ç¤ºå½“å‰ç”¨æˆ·ä¿¡æ¯ã€å°ç»„ä¿¡æ¯ã€ä¼šè®®ä¸»é¢˜ç­‰

#### 2ï¼‰å·¦ä¾§ï¼šä¸ªäººä¿¡æ¯ä¸åä½œåŒº
- **ä¸ªäººä¿¡æ¯å¡**ï¼šæ˜¾ç¤ºä½ çš„å¤´åƒã€å§“åã€è§’è‰²ç­‰
- **åä½œç¬”è®°**ï¼šå¯å¤šäººå®æ—¶ç¼–è¾‘ä¼šè®®ç¬”è®°ï¼Œè‡ªåŠ¨ä¿å­˜
- **å†å²å¼‚å¸¸åé¦ˆ**ï¼šå¯æŸ¥çœ‹è‡ªå·±å†å²ä¸Šçš„å¼‚å¸¸è¡Œä¸ºè®°å½•

#### 3ï¼‰å³ä¾§ï¼šå°ç»„æˆå‘˜çŠ¶æ€é¢æ¿
- æ˜¾ç¤ºæ‰€æœ‰å°ç»„æˆå‘˜çš„å½“å‰çŠ¶æ€
- **å¼‚å¸¸æˆå‘˜**ä¼šä»¥çº¢è‰²å¡ç‰‡é«˜äº®æ˜¾ç¤ºå¼‚å¸¸ç±»å‹å’Œè¯¦ç»†æè¿°
- **æ­£å¸¸æˆå‘˜**ä»¥ç»¿è‰²æ ‡ç­¾æ˜¾ç¤º

#### 4ï¼‰ä¸‹æ–¹/ä¸­éƒ¨ï¼šä¼šè®®è®®ç¨‹ä¸é˜¶æ®µ
- å±•ç¤ºå½“å‰ä¼šè®®è®®ç¨‹ã€é˜¶æ®µè¿›åº¦
- å¯æŸ¥çœ‹æ¯ä¸ªé˜¶æ®µçš„ä»»åŠ¡ã€ç›®æ ‡å’Œå»ºè®®

---

### 3.3 å…¸å‹äº¤äº’æµç¨‹

#### 1ï¼‰ä¼šè®®å¼€å§‹
- ç®¡ç†å‘˜åœ¨å…¬å…±å¤§å±é¡µé¢ç‚¹å‡»"å¼€å§‹ä¼šè®®"
- æ‰€æœ‰æˆå‘˜çš„ä¸ªäººé¡µé¢ä¼šè‡ªåŠ¨åŒæ­¥è¿›å…¥ä¼šè®®çŠ¶æ€

#### 2ï¼‰è¡Œä¸ºä¸è¯­éŸ³é‡‡é›†
- ä½ åœ¨ç½‘é¡µä¸Šçš„æ“ä½œã€å‘è¨€ã€ç¬”è®°ç¼–è¾‘ç­‰ä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨é‡‡é›†å’Œåˆ†æ

#### 3ï¼‰å¼‚å¸¸åˆ†æä¸æ¨é€
- ç³»ç»Ÿä¼šå®šæ—¶åˆ†ææ¯ä½æˆå‘˜çš„è¡Œä¸ºå’Œå‘è¨€
- æ£€æµ‹åˆ°å¼‚å¸¸ï¼ˆå¦‚é•¿æ—¶é—´æœªå‘è¨€ã€æœªå‚ä¸åä½œç­‰ï¼‰ä¼šè‡ªåŠ¨æ¨é€åˆ°ä½ çš„é¡µé¢
- ä½ ä¼šåœ¨å³ä¾§æˆå‘˜é¢æ¿çœ‹åˆ°å¼‚å¸¸æç¤º

#### 4ï¼‰å¼‚å¸¸åé¦ˆä¸åˆ†äº«
- ä½ å¯ä»¥ç‚¹å‡»å¼‚å¸¸åé¦ˆå¡ç‰‡ä¸Šçš„"Share"æŒ‰é’®ï¼Œå°†å¼‚å¸¸ä¿¡æ¯ä¸€é”®åˆ†äº«ç»™å°ç»„å…¶ä»–æˆå‘˜
- å…¶ä»–æˆå‘˜ä¼šå®æ—¶æ”¶åˆ°æ¨é€ï¼Œå¹¶åœ¨è‡ªå·±çš„æˆå‘˜é¢æ¿çœ‹åˆ°ä½ çš„å¼‚å¸¸çŠ¶æ€

#### 5ï¼‰åä½œç¬”è®°
- ä½ å¯ä»¥éšæ—¶åœ¨åä½œç¬”è®°åŒºç¼–è¾‘ã€è¡¥å……ä¼šè®®å†…å®¹
- æ‰€æœ‰æˆå‘˜çš„ç¼–è¾‘ä¼šå®æ—¶åŒæ­¥

#### 6ï¼‰å†å²è®°å½•ä¸è‡ªæŸ¥
- å¯éšæ—¶æŸ¥çœ‹è‡ªå·±çš„å†å²å¼‚å¸¸åé¦ˆï¼Œäº†è§£è¡Œä¸ºæ”¹è¿›å»ºè®®

---

### 3.4 å…¶ä»–è¯´æ˜

- **æ¨é€é€šçŸ¥**ï¼šå¦‚ä½ ç»‘å®šäº†ç§»åŠ¨è®¾å¤‡æˆ–ARçœ¼é•œï¼Œå¼‚å¸¸ä¿¡æ¯ä¹Ÿä¼šé€šè¿‡æå…‰æ¨é€å®æ—¶æé†’ä½ 
- **é¡µé¢è‡ªåŠ¨åŒæ­¥**ï¼šä¼šè®®é˜¶æ®µã€è®®ç¨‹ç­‰ä¿¡æ¯ä¼šè‡ªåŠ¨åŒæ­¥ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°
- **æ•°æ®å®‰å…¨**ï¼šæ‰€æœ‰è¡Œä¸ºæ•°æ®ä»…ç”¨äºå°ç»„åä½œä¸AIåˆ†æï¼Œç®¡ç†å‘˜å·²åšå¥½éšç§ä¿æŠ¤

---

## 4. å¸¸è§é—®é¢˜

- **ä¸ºä»€ä¹ˆè¦å®‰è£…æ’ä»¶ï¼Ÿ**  
  æ’ä»¶ç”¨äºé‡‡é›†ç½‘é¡µè¡Œä¸ºæ•°æ®ï¼Œå¸®åŠ©AIæ›´å¥½åœ°åˆ†æåä½œçŠ¶æ€ã€‚

- **å¼‚å¸¸æ¨é€ä¼šæ‰“æ‰°æˆ‘å—ï¼Ÿ**  
  åªæœ‰æ£€æµ‹åˆ°æ˜æ˜¾å¼‚å¸¸æ—¶æ‰ä¼šæ¨é€ï¼Œå¸®åŠ©ä½ åŠæ—¶è°ƒæ•´å‚ä¸çŠ¶æ€ã€‚

- **åä½œç¬”è®°ä¼šä¸¢å¤±å—ï¼Ÿ**  
  ä¸ä¼šï¼Œæ‰€æœ‰å†…å®¹è‡ªåŠ¨ä¿å­˜å¹¶å®æ—¶åŒæ­¥ã€‚

- **æˆ‘éœ€è¦æ‰‹åŠ¨å¯åŠ¨è¯­éŸ³è¯†åˆ«å—ï¼Ÿ**  
  ä¸éœ€è¦ï¼Œç®¡ç†å‘˜å·²ç»Ÿä¸€é…ç½®å¥½ã€‚

---

## 5. è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®æˆ–é‡åˆ°æŠ€æœ¯é—®é¢˜ï¼Œè¯·è”ç³»ç®¡ç†å‘˜æˆ–æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚

---

**ç¥ä½ åä½œæ„‰å¿«ï¼Œä¼šè®®é«˜æ•ˆï¼**

---

## åŠŸèƒ½äº®ç‚¹

- **AI åä½œåŠ©æ‰‹**ï¼šé›†æˆå¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ GPT-4ï¼‰ï¼Œä¸ºå°ç»„è®¨è®ºæä¾›è®¤çŸ¥å¼•å¯¼ã€æ™ºèƒ½æ€»ç»“ä¸çŸ¥è¯†æ”¯æŒã€‚
- **å®æ—¶è¯­éŸ³è¯†åˆ«**ï¼šæ”¯æŒè…¾è®¯äº‘ ASRï¼Œè‡ªåŠ¨è½¬å†™ä¼šè®®éŸ³é¢‘ï¼ŒåŒºåˆ†å‘è¨€äººå¹¶ç”Ÿæˆå­—å¹•ã€‚
- **å¼‚å¸¸è¡Œä¸ºæ£€æµ‹**ï¼šè‡ªåŠ¨åˆ†æç”¨æˆ·è¡Œä¸ºæ•°æ®ï¼Œæ£€æµ‹å¹¶åé¦ˆä¼šè®®ä¸­çš„å¼‚å¸¸ï¼ˆå¦‚æ²‰é»˜ã€å‘è¨€ä¸å‡ç­‰ï¼‰ã€‚
- **å¤šç«¯åŒæ­¥**ï¼šæ”¯æŒ Web å‰ç«¯ã€æµè§ˆå™¨æ’ä»¶ã€åç«¯ APIã€éŸ³é¢‘é‡‡é›†ä¸åˆ†æç­‰å¤šç«¯åä½œã€‚
- **æµè§ˆå™¨è¡Œä¸ºé‡‡é›†æ’ä»¶**ï¼šå®æ—¶é‡‡é›†ç”¨æˆ·ç½‘é¡µè¡Œä¸ºï¼ˆç‚¹å‡»ã€æ»šåŠ¨ã€åˆ‡æ¢ç­‰ï¼‰ï¼Œè¾…åŠ©è¡Œä¸ºåˆ†æã€‚
- **ä¼šè®®è®®ç¨‹ä¸ä»»åŠ¡ç®¡ç†**ï¼šå¯è§†åŒ–å±•ç¤ºå½“å‰ä»»åŠ¡ã€è®®ç¨‹è¿›åº¦ï¼Œæ”¯æŒä¸€é”®å¯åŠ¨åœ¨çº¿ä¼šè®®ï¼ˆJitsiï¼‰ã€‚
- **æ•°æ®å¯è§†åŒ–ä¸åé¦ˆ**ï¼šå¼‚å¸¸åˆ†æç»“æœä»¥å›¾è¡¨å’Œå¯Œæ–‡æœ¬å½¢å¼å±•ç¤ºï¼Œæ”¯æŒç”¨æˆ·åé¦ˆä¸åˆ†äº«ã€‚

---

## ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ audio_runtime/         # è¯­éŸ³è¯†åˆ«ä¸éŸ³é¢‘å¤„ç†ï¼ˆè…¾è®¯äº‘ ASRï¼Œåˆ†ç»„éŸ³é¢‘ã€å‚è€ƒè¯´è¯äººç­‰ï¼‰
â”œâ”€â”€ client/                # å‰ç«¯ Vue3 + Vite é¡¹ç›®ï¼ˆä¸» UIã€ç”¨æˆ·äº¤äº’ã€WebSocketã€API è°ƒç”¨ç­‰ï¼‰
â”œâ”€â”€ server/                # åç«¯ FastAPI æœåŠ¡ï¼ˆAPIã€WebSocketã€AIåˆ†æã€å¼‚å¸¸æ£€æµ‹ç­‰ï¼‰
â”œâ”€â”€ tabbehavior-extension/ # æµè§ˆå™¨æ’ä»¶ï¼ˆç”¨æˆ·è¡Œä¸ºé‡‡é›†ã€ä¸ä¸»ç³»ç»Ÿè”åŠ¨ï¼‰
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ ...
```

---

## å½“å‰éƒ¨ç½²ä¿¡æ¯

### ğŸŒ è®¿é—®åœ°å€

- **å‰ç«¯é¡µé¢**ï¼šhttps://collaborative-ai-chatbot.web.app
- **åç«¯API**ï¼šhttps://collaborative-backend.onrender.com
- **APIæ–‡æ¡£**ï¼šhttps://collaborative-backend.onrender.com/docs

#### ğŸ“± å‰ç«¯è·¯ç”±ç¤ºä¾‹

**å…¬å…±æ˜¾ç¤ºé¡µé¢**ï¼ˆå¤§å±å±•ç¤ºï¼‰ï¼š
- `https://collaborative-ai-chatbot.web.app/#/public-display/Group%20G`
- `https://collaborative-ai-chatbot.web.app/#/public-display/Group%20B`

**ä¸ªäººå·¥ä½œå°**ï¼ˆç”¨æˆ·ä¸ªäººé¡µé¢ï¼‰ï¼š
- `https://collaborative-ai-chatbot.web.app/#/personal-dashboard/TestUser1`
- `https://collaborative-ai-chatbot.web.app/#/personal-dashboard/TestUser2`


### ğŸ—„ï¸ æ•°æ®åº“ä¿¡æ¯

- **æ•°æ®åº“ç±»å‹**ï¼šFirebase Firestore
- **é¡¹ç›®ID**ï¼š`collaborative-ai-chatbot`
- **Firebaseæ§åˆ¶å°**ï¼šhttps://console.firebase.google.com/project/collaborative-ai-chatbot
- **ä¸»è¦é›†åˆ**ï¼š
  - `users_info` - ç”¨æˆ·ä¿¡æ¯
  - `groups` - å°ç»„ä¿¡æ¯
  - `chat_messages` - èŠå¤©è®°å½•
  - `speech_transcripts` - è¯­éŸ³è½¬å†™è®°å½•
  - `discussion_core` - è®¨è®ºæ ¸å¿ƒæ•°æ®
  - `anomaly_analysis_results` - å¼‚å¸¸åˆ†æç»“æœ

---

## å„æ¨¡å—éƒ¨ç½²ä¸å¯åŠ¨æ–¹å¼

### 1. åç«¯æœåŠ¡ï¼ˆserverï¼‰

- **ä¾èµ–å®‰è£…**  
  ```bash
  cd server
  pip install -r requirements.txt
  ```
- **ç¯å¢ƒå˜é‡**  
  - `.env` æ–‡ä»¶éœ€é…ç½® Firebaseã€JPushã€AI API ç­‰å¯†é’¥ï¼ˆå‚è€ƒ `.env.example`ï¼‰ã€‚
  - éœ€æœ‰ `firebase-key.json`ï¼ˆFirebase æœåŠ¡è´¦å·å¯†é’¥ï¼‰ã€‚
- **å¯åŠ¨æœåŠ¡**  
  ```bash
  uvicorn app.main:app --reload
  ```
  é»˜è®¤ç›‘å¬ç«¯å£ï¼š8000

- **ç”Ÿäº§éƒ¨ç½²**  
  å¯ç”¨ Renderã€Dockerã€äº‘æœåŠ¡å™¨ç­‰ï¼Œå‚è€ƒ `render.yaml`ã€‚

### 2. å‰ç«¯é¡¹ç›®ï¼ˆclientï¼‰

- **ä¾èµ–å®‰è£…**  
  ```bash
  cd client
  npm install
  ```
- **ç¯å¢ƒå˜é‡**  
  - `.env` æ–‡ä»¶éœ€é…ç½® VITE_API_BASEã€VITE_WS_BASEã€Firebase ç­‰ã€‚
- **æœ¬åœ°å¼€å‘**  
  ```bash
  npm run dev
  ```
  é»˜è®¤ç›‘å¬ç«¯å£ï¼š3000

- **ç”Ÿäº§æ„å»º**  
  ```bash
  npm run build
  ```
  æ„å»ºäº§ç‰©åœ¨ `client/dist`ï¼Œå¯é…åˆ Firebase Hosting æˆ–å…¶ä»–é™æ€æœåŠ¡å™¨éƒ¨ç½²ã€‚

### 3. æµè§ˆå™¨æ’ä»¶ï¼ˆtabbehavior-extensionï¼‰

- **ä¾èµ–å®‰è£…ä¸æ„å»º**  
  ```bash
  cd tabbehavior-extension
  npm install
  npm run build
  ```
- **åŠ è½½æ’ä»¶**  
  1. æ‰“å¼€ Chrome æ‰©å±•ç®¡ç†é¡µé¢ `chrome://extensions`
  2. å¼€å¯å¼€å‘è€…æ¨¡å¼
  3. "åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"ï¼Œé€‰æ‹© `tabbehavior-extension/dist` ç›®å½•

- **ç¯å¢ƒå˜é‡**  
  - `.env` æ–‡ä»¶éœ€é…ç½® Firebase ç›¸å…³å‚æ•°ï¼ˆå¦‚ API KEY ç­‰ï¼‰

### 4. è¯­éŸ³è¯†åˆ«ä¸éŸ³é¢‘å¤„ç†ï¼ˆaudio_runtimeï¼‰

- **ä¾èµ–å®‰è£…**  
  ```bash
  pip install pyaudio websocket-client
  ```
- **é…ç½®**  
  - é…ç½®è…¾è®¯äº‘ ASR ç›¸å…³å¯†é’¥
  - `config/` ç›®å½•ä¸‹ä¸ºå„å°ç»„çš„åˆ†ç»„é…ç½®
  - `groups/` ç›®å½•ä¸‹ä¸ºå„å°ç»„çš„å‚è€ƒéŸ³é¢‘
- **ä½¿ç”¨**  
  - è¿è¡Œ `list_audio_devices.py` æŸ¥çœ‹å¯ç”¨éŸ³é¢‘è¾“å…¥è®¾å¤‡
  - è¿è¡Œè‡ªå®šä¹‰è„šæœ¬è¿›è¡ŒéŸ³é¢‘é‡‡é›†ã€è¯†åˆ«ä¸åˆ†ç»„ç®¡ç†

### 5. è¯­éŸ³è¯†åˆ«å¯åŠ¨å‘½ä»¤ï¼ˆæ‰‹åŠ¨é…ç½®ï¼‰

```bash
# è®¾ç½®ä»£ç†ï¼ˆå¦‚éœ€è¦ï¼‰
export http_proxy=http://127.0.0.1:7890
export https_proxy=http://127.0.0.1:7890

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source newenv/bin/activate

# å¯åŠ¨è¯­éŸ³è¯†åˆ«ï¼ˆæŒ‡å®šå°ç»„å’Œè®¾å¤‡ï¼‰
python asr_record.py --group groupB --device 2
python asr_record.py --group groupG --device 2
```

**å‚æ•°è¯´æ˜**ï¼š
- `--group`ï¼šæŒ‡å®šå°ç»„åç§°ï¼ˆgroupAã€groupBã€groupCã€groupDã€groupGï¼‰
- `--device`ï¼šæŒ‡å®šéŸ³é¢‘è®¾å¤‡ç´¢å¼•ï¼ˆé€šè¿‡ `list_audio_devices.py` æŸ¥çœ‹ï¼‰

---

## åç«¯ API æ¥å£è¯´æ˜ï¼ˆéƒ¨åˆ†ï¼‰

### ç”¨æˆ·ç›¸å…³

- `GET /api/users/`  
  è·å–æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯

- `GET /api/users/{user_id}`  
  è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯

- `PUT /api/users/{user_id}`  
  æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆname, academic_background, academic_advantages, device_tokenï¼‰

### å°ç»„ç›¸å…³

- `GET /api/groups/`  
  è·å–æ‰€æœ‰å°ç»„ä¿¡æ¯

- `GET /api/groups/{group_id}`  
  è·å–æŒ‡å®šå°ç»„è¯¦ç»†ä¿¡æ¯

- `GET /api/groups/{group_id}/members`  
  è·å–æŒ‡å®šå°ç»„æˆå‘˜åˆ—è¡¨

- `PUT /api/groups/{group_id}`  
  æ›´æ–°å°ç»„ä¿¡æ¯ï¼ˆåç§°ã€ç›®æ ‡ç­‰ï¼‰

- `GET /api/user/{user_id}/group-context`  
  è·å–ç”¨æˆ·æ‰€åœ¨å°ç»„ã€æˆå‘˜ã€sessionã€AI Bot ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯

### èŠå¤©ä¸è®®ç¨‹

- `GET /api/chat/{group_id}`  
  è·å–æŒ‡å®šå°ç»„çš„èŠå¤©å†å²è®°å½•

- `GET /api/sessions/{group_id}`  
  è·å–æŒ‡å®šå°ç»„å½“å‰æ´»è·ƒ session

- `GET /api/chat/agenda/session/{session_id}`  
  è·å–æŒ‡å®š session ä¸‹çš„æ‰€æœ‰è®®ç¨‹é¡¹

- `POST /api/chat/agenda`  
  æ–°å¢è®®ç¨‹é¡¹

- `PATCH /api/chat/agenda/reset_status/{group_id}?stage=1`  
  æ‰¹é‡æ›´æ–°è®®ç¨‹çŠ¶æ€ï¼ˆnot_started/in_progress/completedï¼‰

### AI Bot ç®¡ç†

- `GET /api/ai_bots`  
  è·å–æ‰€æœ‰ AI Bot

- `GET /api/ai_bots/{bot_id}`  
  è·å–æŒ‡å®š AI Bot ä¿¡æ¯

- `GET /api/ai_bots/group/{group_id}`  
  è·å–æŒ‡å®šå°ç»„çš„ AI Bot

- `PUT /api/ai_bots/{bot_id}/model`  
  æ›´æ–° AI Bot çš„æ¨¡å‹

### å¼‚å¸¸åˆ†æä¸åé¦ˆ

- `POST /analysis/anomalies`  
  æäº¤è¡Œä¸ºæ•°æ®ï¼Œè·å–å¼‚å¸¸åˆ†æç»“æœ  
  **è¯·æ±‚ä½“**ï¼ˆç¤ºä¾‹ï¼‰ï¼š
  ```json
  {
    "group_id": "xxx",
    "round_index": 1,
    "start_time": "2025-07-01T10:00:00",
    "end_time": "2025-07-01T10:05:00",
    "members": [{"id": "user1", "name": "å¼ ä¸‰"}, ...],
    "current_user": {
      "user_id": "user1",
      "name": "å¼ ä¸‰",
      "device_token": "xxxx"
    }
  }
  ```
  **è¿”å›**ï¼šå¼‚å¸¸åˆ†æç»“æœã€æ‘˜è¦ã€è¯¦ç»†å»ºè®®ç­‰

- `POST /analysis/local_anomalies` - åªæ‰§è¡Œæœ¬åœ°åˆ†æï¼Œä¸è°ƒç”¨AIåˆ†æ

### æœ¬åœ°å¼‚å¸¸åˆ†ææ¥å£ä½¿ç”¨ç¤ºä¾‹

**è¯·æ±‚è·¯å¾„**: `POST /analysis/local_anomalies`

**è¯·æ±‚å‚æ•°**:
```json
{
  "group_id": "your_group_id",
  "round_index": 1,
  "start_time": "2024-01-01T10:00:00",
  "end_time": "2024-01-01T11:00:00",
  "members": [
    { "id": "user1", "name": "å¼ ä¸‰" },
    { "id": "user2", "name": "æå››" },
    { "id": "user3", "name": "ç‹äº”" }
  ],
  "current_user": {
    "user_id": "current_user_id",
    "name": "å½“å‰ç”¨æˆ·å",
    "device_token": "device_token_here"
  }
}
```

**è¿”å›æ•°æ®**:
```json
{
  "local_analysis": {
    "user1": {
      "name": "å¼ ä¸‰",
      "speech_duration": "120.5s",
      "speech_percent": "20.1%",
      "page_count": 5,
      "mouse_action_count": 150,
      "mouse_duration": "45.2s",
      "mouse_percent": "7.5%",
      "note_edit_count": 3,
      "note_edit_char_count": 250,
      "speech_level": "High",
      "note_edit_level": "Normal",
      "browser_level": "Low",
      "total_level": "High Participation",
      "total_score": 75
    }
  },
  "raw_data_summary": {
    "time_range": { "start": "2024-01-01T10:00:00", "end": "2024-01-01T11:00:00" },
    "users_count": 3,
    "speech_transcripts_count": 15,
    "note_edit_history_count": 8,
    "pageBehaviorLogs_count": 3
  },
  "processing_time": 2.34,
  "analysis_timestamp": 1704067200.123
}
```

**å‰ç«¯è°ƒç”¨ç¤ºä¾‹**:
```javascript
import apiService from '@/services/apiService';

const data = {
  group_id: "your_group_id",
  round_index: 1,
  start_time: "2024-01-01T10:00:00",
  end_time: "2024-01-01T11:00:00",
  members: [
    { id: "user1", name: "å¼ ä¸‰" },
    { id: "user2", name: "æå››" },
    { id: "user3", name: "ç‹äº”" }
  ],
  current_user: {
    user_id: "current_user_id",
    name: "å½“å‰ç”¨æˆ·å",
    device_token: "device_token_here"
  }
};

try {
  const result = await apiService.getLocalAnomalyStatus(data);
  console.log('æœ¬åœ°åˆ†æç»“æœ:', result.local_analysis);
  console.log('å¤„ç†æ—¶é—´:', result.processing_time);
} catch (error) {
  console.error('åˆ†æå¤±è´¥:', error);
}
```

- `GET /analysis/anomaly_results_by_user?user_id=xxx&page=1&page_size=10`  
  åˆ†é¡µè·å–ç”¨æˆ·å†å²å¼‚å¸¸åˆ†æç»“æœ

- `POST /analysis/anomaly_polling/feedback_click`  
  è®°å½•å¼‚å¸¸åé¦ˆç‚¹å‡»ï¼ˆå¦‚"æ›´å°‘æç¤º""åˆ†äº«"ç­‰ï¼‰

---

## WebSocket æ¥å£è¯´æ˜

- `ws://<server>/ws/{group_id}`  
  å°ç»„çº§ WebSocketï¼Œæ¨é€è®®ç¨‹è¿›åº¦ã€AI åˆ†æç­‰å®æ—¶æ¶ˆæ¯

- `ws://<server>/ws/user/{user_id}`  
  ç”¨æˆ·çº§ WebSocketï¼Œæ¨é€ä¸ªäººå¼‚å¸¸åˆ†æã€åˆ†äº«ç­‰æ¶ˆæ¯

**æ¶ˆæ¯ç±»å‹ä¸¾ä¾‹**ï¼š
- `agenda_stage_update`ï¼šè®®ç¨‹é˜¶æ®µå˜æ›´
- `share`ï¼šå¼‚å¸¸åˆ†æç»“æœåˆ†äº«
- `anomaly_analysis`ï¼šæ¨é€å¼‚å¸¸åˆ†æç»“æœ

---

## ä¾èµ–ä¸ç¯å¢ƒå˜é‡

### åç«¯ï¼ˆserver/requirements.txtï¼‰

- fastapi
- uvicorn
- python-dotenv
- websockets
- openai
- google-generativeai
- firebase-admin
- jpush
- apscheduler
- å…¶å®ƒ

### å‰ç«¯ï¼ˆclient/package.jsonï¼‰

- vue
- element-plus
- axios
- quill
- echarts
- å…¶å®ƒ

### æ’ä»¶ï¼ˆtabbehavior-extension/package.jsonï¼‰

- vue
- element-plus
- firebase
- å…¶å®ƒ

### è¯­éŸ³è¯†åˆ«

- pyaudio
- websocket-client

### ä¸»è¦ç¯å¢ƒå˜é‡

#### åç«¯ç¯å¢ƒå˜é‡ï¼ˆserver/.envï¼‰
```bash
# Firebase é…ç½®
FIREBASE_KEY_JSON={"type":"service_account",...}  # Firebase æœåŠ¡è´¦å·å¯†é’¥ JSON
GOOGLE_APPLICATION_CREDENTIALS=./firebase-key.json

# AI API é…ç½®
OPENAI_API_KEY=sk-...
OPENAI_API_BASE=https://api.openai.com/v1
GEMINI_API_KEY=...

# JPush æ¨é€é…ç½®
JPUSH_APP_KEY=...
JPUSH_MASTER_SECRET=...

# ç¯å¢ƒé…ç½®
ENV=development  # æˆ– production
```

#### å‰ç«¯ç¯å¢ƒå˜é‡ï¼ˆclient/.envï¼‰
```bash
# API é…ç½®
VITE_API_BASE=https://collaborative-ai-chatbot.onrender.com
VITE_WS_BASE=wss://collaborative-ai-chatbot.onrender.com

# Firebase é…ç½®
VITE_FIREBASE_API_KEY=...
VITE_FIREBASE_AUTH_DOMAIN=collaborative-ai-chatbot.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=collaborative-ai-chatbot
VITE_FIREBASE_STORAGE_BUCKET=collaborative-ai-chatbot.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=...
VITE_FIREBASE_APP_ID=...
```

#### è¯­éŸ³è¯†åˆ«é…ç½®ï¼ˆaudio_runtime/.envï¼‰
```bash
# è…¾è®¯äº‘ ASR é…ç½®
TENCENT_SECRET_ID=...
TENCENT_SECRET_KEY=...
TENCENT_APP_ID=...
```

---

## å¸¸è§é—®é¢˜ä¸å¼€å‘å»ºè®®

### ğŸ”§ å¼€å‘è°ƒè¯•

- **æ¥å£æ–‡æ¡£**ï¼šå»ºè®®ç”¨ Postman æˆ– Swagger UI è¿›è¡Œè°ƒè¯•ï¼ŒFastAPI é»˜è®¤æ”¯æŒ `/docs` æ–‡æ¡£é¡µé¢ã€‚
- **æ•°æ®åº“**ï¼šé»˜è®¤ä½¿ç”¨ Firebase Firestoreï¼Œéœ€æå‰é…ç½®å¥½å¯†é’¥ã€‚
- **WebSocket**ï¼šå‰åç«¯éœ€ä¿æŒåè®®ä¸€è‡´ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ wssã€‚
- **éŸ³é¢‘è¯†åˆ«**ï¼šéœ€æå‰å¼€é€šè…¾è®¯äº‘ ASR æœåŠ¡ï¼Œé…ç½®å¥½å¯†é’¥ä¸éŸ³é¢‘è®¾å¤‡ã€‚
- **æ’ä»¶ä¸ä¸»ç³»ç»Ÿè”åŠ¨**ï¼šé€šè¿‡ Chrome Storageã€æ¶ˆæ¯æœºåˆ¶ä¸ä¸»ç³»ç»ŸåŒæ­¥ç”¨æˆ·ä¿¡æ¯ä¸è¡Œä¸ºæ•°æ®ã€‚

### ğŸš€ éƒ¨ç½²ç›¸å…³

- **Firebase Hosting**ï¼šå‰ç«¯å·²é…ç½®è‡ªåŠ¨éƒ¨ç½²åˆ° Firebase Hosting
- **Render éƒ¨ç½²**ï¼šåç«¯å·²é…ç½®è‡ªåŠ¨éƒ¨ç½²åˆ° Render å¹³å°
- **ç¯å¢ƒå˜é‡**ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ç¯å¢ƒå˜é‡è€Œé `.env` æ–‡ä»¶
- **CORS é…ç½®**ï¼šåç«¯å·²é…ç½®å…è®¸çš„åŸŸååˆ—è¡¨ï¼Œæ–°å¢åŸŸåéœ€æ›´æ–° `server/app/main.py`

### ğŸ”’ å®‰å…¨å»ºè®®

- **å¯†é’¥ç®¡ç†**ï¼šç”Ÿäº§ç¯å¢ƒè¯·å‹¿æ³„éœ²å¯†é’¥ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡
- **HTTPS éƒ¨ç½²**ï¼šç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ HTTPS
- **æƒé™æ§åˆ¶**ï¼šFirebase å®‰å…¨è§„åˆ™éœ€æ­£ç¡®é…ç½®
- **API é™æµ**ï¼šè€ƒè™‘æ·»åŠ  API è°ƒç”¨é¢‘ç‡é™åˆ¶

### ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

- **Firebase Analytics**ï¼šå‰ç«¯å·²é›†æˆç”¨æˆ·è¡Œä¸ºåˆ†æ
- **æ—¥å¿—è®°å½•**ï¼šåç«¯ä½¿ç”¨ Python loggingï¼Œè¯­éŸ³è¯†åˆ«æœ‰ç‹¬ç«‹æ—¥å¿—æ–‡ä»¶
- **é”™è¯¯ç›‘æ§**ï¼šå»ºè®®é›†æˆ Sentry ç­‰é”™è¯¯ç›‘æ§æœåŠ¡

---

## è´¡çŒ®ä¸æ”¯æŒ

æ¬¢è¿æäº¤ Issue å’Œ PRï¼Œå»ºè®®å…ˆé˜…è¯»å„å­ç›®å½•ä¸‹çš„ README æˆ–ä»£ç æ³¨é‡Šã€‚  
å¦‚æœ‰é—®é¢˜æˆ–åˆä½œæ„å‘ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…æˆ–åœ¨ GitHub æ Issueã€‚

---

å¦‚éœ€æ›´è¯¦ç»†çš„æ¨¡å—è¯´æ˜æˆ–æ¥å£æ–‡æ¡£ï¼Œè¯·æŸ¥é˜…å„å­ç›®å½•ä¸‹çš„ä»£ç ä¸æ³¨é‡Šï¼Œæˆ–è”ç³»å¼€å‘è€…è·å–æ›´è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£ã€‚

---

å¦‚éœ€è‹±æ–‡ç‰ˆæˆ–æ›´è¯¦ç»†çš„æ¥å£ç¤ºä¾‹ï¼Œä¹Ÿå¯ä»¥å‘ŠçŸ¥æˆ‘ï¼
